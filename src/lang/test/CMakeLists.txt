def_test(GROUP lang NAME compiler_ast LINK nkl_lang TARGET AST_TEST)
def_test(GROUP lang NAME compiler_src LINK nkl_lang TARGET SRC_TEST)

if(CMAKE_SYSTEM_NAME STREQUAL "Linux")
    target_link_options(${AST_TEST} PRIVATE -export-dynamic)
    target_link_options(${SRC_TEST} PRIVATE -export-dynamic)
elseif(CMAKE_SYSTEM_NAME STREQUAL "Windows")
    target_compile_options(${AST_TEST} PRIVATE -export-all-symbols)
    target_compile_options(${SRC_TEST} PRIVATE -export-all-symbols)
else()
    message(FATAL_ERROR "Platform is not supported")
endif()
